# 类的加载时机

类从加载到卸载内存要经历7个阶段：

- 加载
- 验证
- 准备
- 解析
- 初始化
- 使用
- 卸载


### 引起类加载的5种情况：

**1.遇到new、getstatic、putstatic 或invokestatic 这4条指令，如果累没有初始化则进行初始化。**
    
使用场景： 

- 使用new 关键字
- 读取或设置一个类的静态字段（被final 修饰、已经在编译器把结果放入常量池的静态字段的除外）
- 调用用一个类的静态方法

**2.使用java.lang.reflect 包的方法对类进行反射调用的时候**

**3.初始化一个类的时候，如果发现其父类没有初始化，则先初始化其父类**

**4.JVM启动时要指定一个主类（main（）方法），先初始化这个主类**

**5.当使用JDK1.7 的动态语言支持时，如果一个java.lang.invoke.MethodHandle 实例最后的解析结果REF_getstatic、REF_putstatic 或REF_invokestatic 方法句柄，并且这个句柄对应的类没有初始化则初始化。**

###  三个被动引用不会触发类的初始化的例子

**1.通过子类引用父类的静态字段不会触发子类的初始化**

**2.通过数组定义引用类，不会触发此类的初始化**

**3.变量在编译器存入调用类的常量池**
